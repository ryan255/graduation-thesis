目   录
第一章 绪论	2
1.1 选题背景及意义	2
1.2 技术背景 3
1.3 在入侵检测应用中应用决策树分类算法的优点	6
1.4 本章小结	7
第二章 决策树分类算法原理介绍	8
第三章 网络入侵检测的决策树数据挖掘分析	9
结论（总结及展望）	10
致 谢	12
参考文献	13





# 基于kafka redis oracle 的分布式存储架构应用研究

吴瀚元

## 摘 要：

在大型电子商务网站业务量飞速增长的今天，传统的数据存储架构愈发的无法满足新时代电子商务网站在响应速度、可扩展性、容灾性等方面的需求。人们需要一种低成本的、可扩展的、高性能的大规模存储解决方案。数据库的种类众多，而其中以key-value数据库与传统关系型数据为代表，而key-value数据库中以redis为代表，关系型数据库以Oracle数据库为代表。本文主要是对大型存储的需求进行分析，针对电商网站的的特点，同时使用两种数据库并使用kafka作为中间件来同步数据，既利用了redis数据库易扩展高效率的特点，又利用传统数据库稳定性。这一改进，不但提高了电商网站的访问效率，而且还能够方便的与客户已有的IT系统对接。测试结果表明，本数据库存储架构的性能能够满足业务需求，与传统方式对比，效率大大提升。

关键字：kakfa；redis；oracle；数据库







## 第一章 绪论

### 1.1 选题背景及意义

随着电子商务网站的快速发展，客户量与业务量的急速增长给数据库提出了更多的要求，而传统的数据库架构存在体积臃肿、扩展性不足、效率低下等问题，而新型的key-value数据库在较小数据量时性能虽然高，但是性能受限于物理内存的限制，不能独立用作海量数据的高性能读写上。而且，一个大型的独立品牌电商网站在后台必然会与其原有IT系统的对接需求，单独某种单一数据库结构难以满足需求。

既然单独应用两种数据库都无法解决问题，那么将两者结合在一起就成为了我们的选择。而要将两者结合，其中最主要解决的问题就是数据同步。为了保证数据同步的实时性和扩展能力，我们需要一种可水平扩展和高效率的消息系统作为数据转发的中转站。这个系统就是kafka。

在本项目中，我们将redis中的数据变化发送给kafka集群，再由一个程序接收kafka消息队列并将数据写入另一个redis数据库。同时又另一个程序负责将数据写入oracle，从而解决了redis集群与oracle的数据同步问题。

本项目具有很高的现实意义，本系统已经在优衣库官网电商平台项目上得到实施，作为项目中的数据库架构，给前后端服务提供了稳定的、可扩展的支持。本架构弥补了行业中oracle数据库与redis数据库同步的技术空白，为以后相关架构的发展提供了可靠的依据。

### 1.2 技术背景

本项目中使用的技术主要有：redis、oracle数据库、kafka和spring-boot。

Redis 是一个开源（BSD许可）的，内存中的数据结构存储系统，它可以用作数据库、缓存和消息中间件。它支持多种类型的数据结构，如 字符串（strings）， 散列（hashes）， 列表（lists）， 集合（sets）， 有序集合（sorted sets） 与范围查询， bitmaps， hyperloglogs 和 地理空间（geospatial） 索引半径查询。 Redis 内置了 复制（replication）， LUA脚本（Lua scripting）， LRU驱动事件（LRU eviction）， 事务（transactions） 和不同级别的 磁盘持久化（persistence）， 并通过 Redis哨兵（Sentinel） 和自动 分区（Cluster）提供高可用性（high availability）。

Oracle Database，又名Oracle RDBMS，或简称Oracle。是甲骨文公司的一款关系数据库管理系统。它是在数据库领域一直处于领先地位的产品。可以说Oracle数据库系统是目前世界上流行的关系数据库管理系统，系统可移植性好、使用方便、功能强，适用于各类大、中、小、微机环境。它是一种高效率、可靠性好的 适应高吞吐量的数据库解决方案。

Kafka是一种高吞吐量的分布式发布订阅消息系统，它可以处理消费者规模的网站中的所有动作流数据。 这种动作（网页浏览，搜索和其他用户的行动）是在现代网络上的许多社会功能的一个关键因素。 



1.3 在入侵检测应用中应用决策树分类算法的优点
数据挖掘的研究意义在于能结合具体的应用，结合特定领域知识和特定逻辑，然后嵌入数据挖掘技术，发现针对特定领域的知识。
针对于具体的网络入侵检测的应用，人们往往希望能从收集到的审计数据和网络数据包，包括连接网站的记录信息中，分析出入侵模型，达到防范的目的。然而随着网络信息的丰富和带宽的扩大，这些信息是非常巨大的，要想从海量的数据中发现有意义的信息将变得很困难。此刻，就需要数据挖掘技术帮人们解决“数据丰富，信息贫乏”的问题。入侵检测是根据已生成的规则、模式对系统中的信息进行检测来发现入侵的过程。目前用于入侵检测的常用的数据挖掘算法主要是关联规则、序列和分类这三种类型。
关联规则挖掘是指在大量数据项集之间挖掘出具有这种形式的规则：由于某些事件的发生而引起的另外一些事情的发生。它是指出数据项之间的相关性。关联规则的一个典型应用是购物篮的分析，即发现交易数据库中不同商品之间的联系。
序列分析发现不同数据项之间的相关性，获取序列模式模型。序列分析的目标是在事务数据库中发掘出序列模式，即满足用户指定的最小支持度要求的大序列，并且该序列模式必须是最高序列，这类算法一般用于发现审计事件中频繁发生的时间序列。
分类算法的目的是提取数据库中数据项的特征属性，生成分类模型。该算法的输出结果就是分类器，该模型能够把数据库中的记录映射到给定类别中的某一个，从而应用于数据预测。
本文主要对分类算法C4.5进行研究和相应的改进。根据此次研究的目的，主要是是致力与能在入侵检测应用中，用数据挖掘算法C4.5发现入侵模式，并根据具体的数据集对挖掘算法做相应的改进。

1.4 本章小结
本章主要介绍了数据挖掘算法的背景及意义，同时也简要的概述了数据挖掘技术中，分类算法的主流技术和发展方向，并结合入侵检测，分析了应用决策树分类算法的优点。

第二章 决策树分类算法原理介绍
第三章 网络入侵检测的决策树数据挖掘分析
结论（总结及展望）
此次研究中，主要是基于网络入侵检测的具体数据挖掘，应用C4.5决策树分类算法对KDDCup1999数据集进行数据挖掘，主要是针对于网络入侵中不必要的正常数据进行排除，只利用了异常数据对数据进行分类挖掘的角度，对C4.5算法做了改进。改进的结果也显示，没有影响网络入侵模型的准确度，同时还大大的提高了C4.5算法在对网络入侵模型进行挖掘的时间效率。
但是这次研究也有不足的地方，首先，目前C4.5对KDDCup1999分析出的决策树中，还存在很多空枝，也就是没有符合此路径的实例。这一点还需要继续研究C4.5算法，从算法的建树模块或者剪枝模块进行改进，应该可以得到一棵更准确的决策树。
再者，如果可以结合多种数据挖掘算法，我们可以得到更细致的知识。例如，可以将关联分析规则加入到C4.5算法中，则就可以得到更多关于网络入侵的模式，这将更有效的帮助人们防范与预测网络入侵。













致 谢
在这次做毕业设计的整个过程中，我要感谢的人有很多。
我首先要感谢我的指导老师。当我迷惑在途中不知所向的时，是指导老师及时给了我指点，让我及时更正了研究方向，我才能及时，高效的完成我的毕业设计。指导老师非常负责地协助我走完了整个过程。真心的谢谢您。
其次要感谢我们学院的XXx老师，他们在数据挖掘方面给了我很多指导和帮助，使我少走了许多弯路。
还要谢谢的就是我身边的很多同学，我在实际研究的过程中，遇到了一些问题，是他们帮助了我，也让我学到了许多东西。
谢谢你们！














参考文献
[1] Jiawei han， Micheline Kamber. 《DATA DMINING: Concepts and Techniques》[M]. 北京：高等教育出版社.2001
[2] 毛国君，段立娟，王实等. 《数据挖掘原理与算法》[M]. 北京：清华大学出版社.2005
[3] 史忠植. 《知识发现》[M]. 北京：清华大学出版社.2002
[4] 闪四清，陈茵，程雁等. 《数据挖掘——概念、模型、方法和算法》[M]. 北京：清华大学出版社.2003
[5] W.Lee S.J.Stolfo, K.W.Mok. “Mining in a data-flow covironment, Experience in Network intrusion detection. In Proceeding of the ACM SIGKDD International Conference on Knowledge Discovery&Data Mining”. 1999,112-115
[6] Porter B W, Baress E R, Holte R. “Concept learning and heuristic classification in weak theory domains”. Artificial Intelligence,1989,45(1/2):56～58
[7] Breiman L，Friedman J，OIshen R A，Stone C J，“Classification and regression trees”
. Belmont: Wadsworth, 1984:1-358.
[8] KDDCup1999. 
http://kdd.ics.uci.edu/databases/kddcup99/kddcup99.html
[9] C4.5 Tutorial. 
http://www2.cs.uregina.ca/~dbd/cs831/notes/ml/dtrees/c4.5/c4.5.html
[10] 凌昊. 《基于决策树分类算法的网络入侵检测系统的研究》. 2007
[11] 关晓蔷. 《基于决策树的分类算法研究》. 2006
[12] 卜亚杰. 《决策树分类算法的研究及应用》. 2007
[13] 迟庆云. 《基于决策树的分类算法研究与应用》. 2005
[14] 郭爱伟. 《入侵检测系统分类算法的研究》. 2006
[15] 王一萍，于利，闫孚等. 《运用C4.5 算法优化入侵检测系统的研究》. 高师理科学刊. 2007
[16] 袁爱香. 《C4. 5数据挖掘算法的改进及其应用》. 山东农业大学学报. 2008